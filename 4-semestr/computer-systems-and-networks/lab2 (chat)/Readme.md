## 3. Чат

### Затрагиваемые темы
- Программирование клиент-серверного приложения.
- Протоколы TCP и UDP и разработка собственного простого протокола на их базе.
- Многопоточное программирование.

### Задание
Необходимо разработать программу (консольную или графическую) для обмена текстовыми сообщениями, работающую в локальной сети в одноранговом режиме.

#### Требования к функционалу:
1. **Идентификация узлов**:
   - Каждый узел идентифицируется IP-адресом и произвольным именем (уникальность имен не требуется)
   - Имя задается через параметр командной строки, конфигурационный файл или другим способом

2. **Обнаружение узлов**:
   - После запуска узел отправляет широковещательный UDP-пакет с своим именем
   - Получившие пакет узлы устанавливают TCP-соединение и передают свое имя для идентификации
   - В любой момент может присоединиться новый клиент

3. **Обмен сообщениями**:
   - Каждый узел поддерживает по одному TCP-соединению с каждым другим узлом
   - Сообщения рассылаются всем узлам сети
   - Корректная обработка отключения узлов

4. **Пользовательский интерфейс**:
   - Возможность ввода и отправки сообщений
   - Просмотр истории событий с момента последнего запуска

5. **Формат истории событий** (хронологический порядок с отметками времени):
   - Входящие сообщения (с именем и IP отправителя)
   - Отправленные сообщения
   - Обнаружение новых узлов
   - Отключение узлов

6. **Формат сообщений** (рекомендуемый):
   | Смещение в байтах | Содержимое                          |
   |-------------------|-------------------------------------|
   | 0                 | тип сообщения (1-сообщение, 2-имя и т.п.) |
   | 1                 | n - длина сообщения в байтах         |
   | далее n байт      | содержание сообщения                |

### Способы тестирования
1. Docker (для консольных программ)
2. Виртуальные машины VirtualBox (для графических программ)
3. Bind на разные адреса loopback интерфейса: `127.0.0.1`, `127.0.0.2` и т.д.
   - Поддерживается в новых версиях Windows
   - Может потребовать настройки в Linux

**Примечание**: При создании сокетов указывать IP-адрес, переданный при запуске программы. Запускать несколько экземпляров с разными IP: `127.0.0.1`, `127.0.0.2` и т.д.

### Дополнительное задание
Реализовать передачу имеющейся истории событий новому узлу при подключении:
1. Новый узел запрашивает историю у любого имеющегося узла
2. Передача происходит по установленному TCP-соединению
3. Принятая история отображается в интерфейсе

**Автор**: Александр Марьин, 051005